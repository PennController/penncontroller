/*! $AC$ PennController.newMouseTracker(name) Creates a new MouseTracker element $AC$$AC$ PennController.getMouseTracker(name) Retrieves an existing MouseTracker element $AC$$AC$ Mouse PElement.start() Starts listening to mouse movements $AC$$AC$ Mouse PElement.stop() Stops listening to mouse movements $AC$$AC$ Mouse PElement.callback( commands ) Runs the specified command(s) when the mouse moves $AC$$AC$ Mouse PElement.log() Logs the X and Y positions of the mouse $AC$ */!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=127)}({127:function(t,e){window.PennController._AddElementType("MouseTracker",(function(t){let e,n;this.immediate=function(t){void 0!==t&&"string"==typeof t&&0!=t.length||(t="MouseTracker"),this.id=t,$(document).mousemove(t=>{e=t.clientX,n=t.clientY,this.move&&this.move instanceof Function&&this.enabled&&this.move(t)}),$(document).click(t=>{this.click&&this.click instanceof Function&&this.enabled&&this.click(t)})},this.uponCreation=function(t){this.coordinates=[],this.enabled=!1,this.callbacks=[],this.clickCallbacks=[],this.currentStream=[],this.log=[],this.clicks=[];let i=this;this.click=async t=>{if(this.enabled){this.clicks.push([Date.now(),t.clientX,t.clientY]);for(let e=0;e<this.clickCallbacks.length;e++){let n=this.clickCallbacks[e];n instanceof Function?await n.apply(this,[t.clientX,t.clientY]):n._runPromises&&n._runPromises instanceof Function&&await n._runPromises(t.clientX,t.clientY)}}},this.move=async function(){if(i.enabled&&(i.currentStream.push([Date.now(),e,n]),i.callbacks.length))for(let t=0;t<i.callbacks.length;t++)i.callbacks[t]instanceof Function?await i.callbacks[t].apply(this,[e,n]):i.callbacks[t]._runPromises&&i.callbacks[t]._runPromises instanceof Function&&await i.callbacks[t]._runPromises(e,n)},this.finishStream=()=>{if(this.currentStream.length>1){let t=this.currentStream[0][1],e=this.currentStream[0][2],n=this.currentStream[0][0];void 0===t&&(t=this.currentStream[1][1]),void 0===e&&(e=this.currentStream[1][2]);let i="x"+t+"y"+e+"w"+this.currentStream[0][3]+"h"+this.currentStream[0][4];for(let r=1;r<this.currentStream.length;r++){let c=this.currentStream[r][1]-t,s=this.currentStream[r][2]-e;i+="t"+(this.currentStream[r][0]-n),i+=(c>=0?"+":"")+c,i+=(s>=0?"+":"")+s,t=this.currentStream[r][1],e=this.currentStream[r][2],n=this.currentStream[r][0]}let r="NULL";window.innerWidth==this.currentStream[0][3]&&window.innerHeight==this.currentStream[0][4]||(r="Size of window changed to "+window.innerWidth+" * "+window.innerHeight),this.coordinates.push([i,this.currentStream[0][0],r])}this.currentStream=[]},t()},this.end=function(){this.enabled=!1,this.finishStream&&this.finishStream instanceof Function&&this.finishStream(),this.log.map(e=>{"string"==typeof e&&(e.match(/move/i)?this.coordinates.map(e=>t.controllers.running.save(this.type,this.id,"Move",...e)):e.match(/click/i)&&this.clicks.map(e=>t.controllers.running.save(this.type,this.id,"Click",e[1]+":"+e[2],e[0],"NULL")))})},this.value=function(){return e&&n?e+"-"+n:"NA-NA"},this.actions={start:function(t){this.currentStream=[[Date.now(),e,n,window.innerWidth,window.innerHeight]],this.enabled=!0,t()},stop:function(t){this.enabled=!1,this.finishStream(),t()}},this.settings={callback:function(t,...e){0!=e.length&&("string"==typeof e[0]&&e[0].match(/click/i)?(e.shift(),this.clickCallbacks=this.clickCallbacks.concat(e)):this.callbacks=this.callbacks.concat(e),t())},log:function(t,...e){console.log("log what?",e),e.length?this.log=e:this.log=["clicks","movements"],t()}},this.test={over:function(i){return i instanceof jQuery?t.utils.overToScale.call(i,e,n):!!(i._element&&i._element.hasOwnProperty("jQueryElement")&&i._element.jQueryElement instanceof jQuery)&&t.utils.overToScale.call(i._element.jQueryElement,e,n)}}}))}});