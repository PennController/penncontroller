/*! $AC$ PennController.newVar(name,value) Creates a new Var element $AC$$AC$ PennController.getVar(name) Retrieves an existing Var element $AC$$AC$ Var PElement.set(value) Sets the value (can be a function, e.g. v=>v+1 will increment the value) $AC$$AC$ Var PElement.local() Ensures that the value of this Var element only affects the current trial $AC$$AC$ Var PElement.global() Shares the value with all Var elements with the same name across trials $AC$$AC$ Var PElement.test.is(value) Checks the value of the Var element (can be a function, e.g. v=>v<10) $AC$$AC$ all PElements.setVar(var) Sets the value of the specified Var element with the current value of the element $AC$ */!function(e){var t={};function n(i){if(t[i])return t[i].exports;var l=t[i]={i:i,l:!1,exports:{}};return e[i].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(i,l,function(t){return e[t]}.bind(null,l));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=41)}({41:function(e,t){!function(){var e=null;let t=window.PennController.ResetPrefix;window.PennController.ResetPrefix=function(n){t(n),e="string"==typeof n?window[n]:window};let n={};window.PennController._AddElementType("Var",(function(t){this.immediate=function(i,l){(t=>{let n=window.PennController.Elements.getVar;window.PennController.Elements.getVar=function(e){let i=t.controllers.underConstruction;if(t.controllers.running&&(i=t.controllers.list[t.controllers.running.id]),i.elements.hasOwnProperty("Var")&&i.elements.Var.hasOwnProperty(e))return n(e);{let t=window.PennController.Elements.newVar(e).settings.global();return t._element.scope="global",t}},e&&(e.getVar=window.PennController.Elements.getVar)})(t);let r=t.controllers.underConstruction;if(t.controllers.running&&(r=t.controllers.list[t.controllers.running.id]),r.elements.hasOwnProperty("Var")&&r.elements.Var.hasOwnProperty(i)){"global"==r.elements.Var[i].scope&&delete r.elements.Var[i]}this.scope="local",this.initialValue=l,this._value=l,this.getter=()=>"local"==this.scope?this._value:n[this.id],this.setter=e=>{"local"==this.scope?this._value=e:n[this.id]=e},Object.defineProperty(this,"value",{get:this.getter,set:this.setter}),this.evaluate=()=>this.value&&"Var"===this.value.type?this.value.evaluate():this.value},this.uponCreation=function(e){this.scope="local",this.value=this.initialValue,this.values=[],e()},this.end=function(){if(this.log&&this.log instanceof Array&&(this.log.indexOf("final")>-1&&t.controllers.running.save(this.type,this.id,"Final",this.value,Date.now(),"Value at the end of the trial"),this.log.indexOf("set")>-1)){for(let e in this.values)t.controllers.running.save(this.type,this.id,...this.values[e]);this.values.length||t.controllers.running.save(this.type,this.id,"Set","NA","Never","The Var element was never set during the trial")}},this.value=function(){return this.evaluate()},this.actions={set:function(e,t){"object"==typeof t&&t.hasOwnProperty("value")?this.value=t.value:this.value=t instanceof Function?t.call(this,this.value):t,void 0===this.values&&(this.values=[]),this.values.push(["Set",this.value,Date.now(),"NULL"]),e()}},this.settings={local:function(e){this.scope="local",e()},log:function(e,...t){t.length?this.log=t:this.log=["final"],e()},global:function(e){n.hasOwnProperty(this.id)||(n[this.id]=this.value),this.scope="global",e()}},this.test={is:function(e){let t=this.evaluate();return e&&e.value&&(e=e.value),e&&e._element&&(e=e._element),t&&t._element&&(t=t._element),e instanceof RegExp&&"text"==typeof t?t.match(e):e instanceof Function?e(t):t==e}}})),window.PennController._AddStandardCommands((function(e){this.actions={setVar:function(t,i){if("string"==typeof i){if(!e.controllers.running.options.elements.hasOwnProperty("Var"))return e.debug.error("No Var element named "+i+" found");let t=e.controllers.running.options.elements.Var[i];if(t)t.value=window.PennController.Elements["get"+this.type](this).value;else{if(!n[i])return e.debug.error("No Var element named "+i+" found");n[i].value=window.PennController.Elements["get"+this.type](this).value}}else e.debug.error("Invalid variable reference when trying to store "+this.id+"'s value",i);t()}}}))}()}});