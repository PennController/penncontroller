!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=16)}({16:function(e,t){(()=>{let e,t;PennController._AddElementType("DragDrop",(function(n){this.immediate=function(n,...i){this._initParameters=i,this.drop=(n,i,o=!0)=>{if(this.disabled)return;const s=this._drops[i].pointer._element.jQueryElement,r=this._drags[n].pointer._element.jQueryElement,l=this._drops[i].indicesDrag;let d=null;this._drags[n].indexDrop>=0&&(d=this._drops[this._drags[n].indexDrop]);let h=this._drops[i].swap;void 0===h&&(h=this._swap),h&&l.length>=0&&(l.forEach(i=>{const o=this._drags[i].pointer._element.jQueryElement;o.appendTo(r.parent()),e<0?o.css({position:r.css("position"),top:r.css("top"),left:r.css("left")}):o.css({position:t.old_position,top:t.old_top,left:t.old_left}),d?(d.indicesDrag=d.indicesDrag.filter(e=>e!=n),d.indicesDrag.push(i)):o.css({top:0,left:0}),this._drags[i].indexDrop=this._drags[n].indexDrop}),this._drops[i].indicesDrag=[]);const p=this._drops[i].offset;if(p.length>1&&("unset"!=p[0]||"unset"!=p[1]))r.css({position:"absolute",top:p[1],left:p[0]});else{const e=r[0].getBoundingClientRect(),t=this._drops[i].pointer._element.jQueryElement[0].getBoundingClientRect();r.css({position:"absolute",top:e.top-t.top,left:e.left-t.left})}if(r.appendTo(s),o&&(this._events[this._events.length-1][2]=Date.now(),this._events[this._events.length-1][3]=this._drops[i].pointer._element.id),this._drags[n].indexDrop>=0){const e=this._drops[this._drags[n].indexDrop];e.indicesDrag=e.indicesDrag.filter(e=>e!=n)}this._drags[n].indexDrop=i,this._drops[i].indicesDrag.push(n),o&&(this._callbacks.forEach(async e=>{for(let t=0;t<e.length;t++)e[t]instanceof Function?await e.call(this):e[t]._runPromises instanceof Function&&await e[t]._runPromises()}),this._waits=this._waits.filter(e=>e.call()))},this._mousedown=n=>{if(!this.disabled)for(let i=0;i<this._drags.length;i++){const o=this._drags[i].pointer;if(void 0===o._runPromises||void 0===o._element)return;const s=o._element;if(!(s.jQueryElement instanceof jQuery))return;if(s.jQueryElement[0]===n.target){e=i;const o=n.target.getBoundingClientRect();t={x:n.clientX,y:n.clientY,top:o.top,left:o.left,old_top:n.target.style.top,old_left:n.target.style.left,old_position:n.target.style.position},$(n.target).css({position:"fixed",top:o.top,left:o.left}),this._events.push([s.id,Date.now()]);break}}},this._mousemove=n=>{if(this.disabled)return;if(e<0)return;return this._drags[e].pointer._element.jQueryElement.css({top:t.top+(n.clientY-t.y),left:t.left+(n.clientX-t.x),"z-index":999999}),n.preventDefault(),n.stopPropagation(),!1},this._mouseup=n=>{if(this.disabled)return e=-1;if(e<0)return e=-1;const i=this._drags[e].pointer._element.jQueryElement;let o=!1;for(let t=0;t<this._drops.length;t++){const i=this._drops[t].pointer;if(void 0===i._runPromises||void 0===i._element)return e=-1;const s=i._element;if(!(s.jQueryElement instanceof jQuery))return e=-1;const r=s.jQueryElement,l=this._drops[t].indicesDrag,d=r[0].getBoundingClientRect();if(n.clientX>d.left&&n.clientX<d.left+d.width&&n.clientY>d.top&&n.clientY<d.top+d.height&&(!this._single||0===l.length)){this.drop(e,t,!0),o=!0;break}}if(!o)if(this._bungee)i.css({position:t.old_position,left:t.old_left,top:t.old_top});else{const e=i[0].getBoundingClientRect();i.appendTo($("body")).css({position:"absolute",top:e.top+window.scrollY,left:e.left+window.scrollX})}e=-1},this._touch=t=>{ev=t.originalEvent;const n={clientX:0,clientY:0,preventDefault:()=>ev.preventDefault(),stopPropagation:()=>ev.stopPropagation()};let i=ev.changedTouches;(void 0===i||i.length<1)&&(i=ev.targetTouches),(void 0===i||i.length<1)&&(i=ev.touches);for(let e=0;e<i.length;e++){const t=i[e];n.clientX+=t.clientX,n.clientY+=t.clientY,n.target=t.target}switch(n.clientX=n.clientX/i.length,n.clientY=n.clientY/i.length,ev.type){case"touchstart":this._mousedown(n);break;case"touchmove":e>=0&&ev.preventDefault(),this._mousemove(n);break;case"touchend":e>=0&&ev.preventDefault(),this._mouseup(n)}},Object.defineProperty(this,"dragElements",{get:()=>this._drags.map(e=>e.pointer._element)}),Object.defineProperty(this,"dropElements",{get:()=>this._drops.map(e=>e.pointer._element)})},this.uponCreation=function(n){this._log=!1,this._drags=[],this._drops=[],this._offset=[],this._waits=[],this._events=[],this._callbacks=[],this._bungee=!1,this._swap=!1,this._single=!1,this._initParameters.forEach(e=>{e.match(/bungee/i)?this._bungee=!0:e.match(/swap/i)?this._swap=!0:e.match(/single/i)&&(this._single=!0)}),e=-1,t={x:0,y:0,top:0,left:0,old_top:0,old_left:0,old_position:"unset"},$(document).bind("mousedown",".PennController-elementContainer > *",this._mousedown),$(document).bind("mousemove",this._mousemove),$(document).bind("mouseup",this._mouseup),$(document).bind("touchstart",".PennController-elementContainer > *",this._touch),$(document).bind("touchmove",this._touch),$(document).bind("touchend",this._touch),n()},this.end=function(){if($(document).unbind("mousedown",".PennController-elementContainer > *",this._mousedown),$(document).unbind("mousemove",this._mousemove),$(document).unbind("mouseup",this._mouseup),$(document).unbind("touchstart",".PennController-elementContainer > *",this._touch),$(document).unbind("touchmove",this._touch),$(document).unbind("touchend",this._touch),e=-1,"all"==this._log&&this._events.forEach(e=>{e.length<3?n.controllers.running.save(this.type,this.id,"Drag",e[0],e[1],"Not dropped"):(n.controllers.running.save(this.type,this.id,"Drag",e[0],e[1],"Dropped on "+e[3]),n.controllers.running.save(this.type,this.id,"Drop",e[3],e[2],"Dopped "+e[0]))}),this._log){let e=[];this._drags.forEach(t=>{if(void 0===t.pointer||void 0===t.pointer._element||void 0===t.pointer._runPromises)return;const n=t.pointer._element.id.replace(/:;/g,"_");t.indexDrop>=0?e.push(n+":"+this._drops[t.indexDrop].pointer._element.id.replace(/:;/g,"_")):e.push(n+":")}),n.controllers.running.save(this.type,this.id,"Final",e.join(";"),Date.now(),"NULL")}},this.value=function(){},this.actions={addDrag:function(e,...t){t.forEach(e=>this._drags.push({pointer:e,indexDrop:-1})),e()},addDrop:function(e,...t){this._offset.length>1?t.forEach(e=>this._drops.push({pointer:e,indicesDrag:[],offset:[this._offset[0],this._offset[1]]})):t.forEach(e=>this._drops.push({pointer:e,indicesDrag:[],offset:[],swap:void 0})),e()},bungee:function(e,...t){this._bungee=!0,e()},callback:function(e,...t){this._callbacks.push(t),e()},drop:function(e,t,n,i=!1){if(void 0===t._element||void 0===n._element)return;const o=this.dragElements,s=this.dropElements;let r,l;if(r=o.indexOf(t._element),r<0){if(r=o.indexOf(n._element),r<0)return e();if(l=s.indexOf(t),l<0)return e()}else if(l=s.indexOf(n._element),l<0)return e();this.drop(r,l,i),e()},log:function(e,t=!0){this._log=t,e()},offset:function(e,t,n,...i){if(void 0===n?n=t:n._runPromises&&(i=[n,...i],n=t),i.length>0){const e=this._drops.map(e=>e.pointer._element);i.forEach(i=>{const o=e.indexOf(i._element);o<0||(this._drops[o].offset=[t,n])})}else this._drops.forEach(e=>e.offset=[t,n]),this._offset=[t,n];e()},removeDrag:function(e,...t){const n=t.map(e=>e._element);this._drags=this._drags.filter(e=>void 0===e.pointer._element||n.indexOf(e.pointer._element)<0),e()},removeDrop:function(e,...t){const n=t.map(e=>e._element);this._drops=this._drops.filter(e=>void 0===e.pointer._element||n.indexOf(e.pointer._element)<0),e()},single:function(e,...t){this._single=!0,e()},swap:function(e,...t){if(t.length>0){const e=this._drops.map(e=>e.pointer._element);t.forEach(t=>{const n=e.indexOf(t._element);n<0||(this._drops[n].swap=!0)})}else this._drops.forEach(e=>e.swap=!0),this._swap=!0;e()},wait:function(e,t){let n=e;t&&t._runPromises instanceof Function&&t.success&&(n=()=>t._runPromises().then(t=>"success"==t&&e())),this._waits.push(n)}},this.test={dropped:function(...e){if(0==e.length)return this._drags.filter(e=>e.indexDrop>=0).length>0;const t=this.dragElements,n=this.dropElements;if(e.length>1){let i=e[0],o=e[1];if(void 0===i._element||void 0===o._element)return this._drags.filter(e=>e.indexDrop>=0).length;let s,r=t.indexOf(i._element);if(r<0&&(i=e[1],r=t.indexOf(i._element),o=e[0]),s=n.indexOf(o._element),r>=0&&s>=0)return this._drags[r].indexDrop==s}let i=!0;return e.forEach(e=>{if(void 0===e._element)return;const o=t.indexOf(e._element);if(o>=0)return i=i&&this._drags[o].indexDrop>=0;const s=n.indexOf(e._element);return s>=0?i=i&&this._drops[s].indicesDrag.length>0:void 0}),i}}}))})()}});